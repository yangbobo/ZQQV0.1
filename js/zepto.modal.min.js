/*!  2014-07-04 */
!function(a){function b(){return a("<div></div>").attr("id",m.overlayId).addClass("modal-overlay").css(a.extend(m.overlayCss,i)).css({"z-index":m.zIndex+1,opacity:m.opacity,width:h.width(),height:h.height()})}function c(){return a("<div></div>").attr("tabindex",-1).addClass("modal-wrap").css(k)}function d(){return m.close&&m.closeHTML?a(m.closeHTML).addClass(m.closeClass):""}function e(){return a("<div></div>").attr("id",m.containerId).addClass("modal-container").css(a.extend({position:m.fixed?"fixed":"absolute"},j,m.containerCss)).css("z-index",m.zIndex+2).css("display","none")}var f=".modal",g=a('<div class="modal-placeholder" style="display: none"></div>'),h=a(document),i=(a(window),{display:"none",position:"fixed",left:0,top:0,"background-color":"#000"}),j={left:0,right:0,top:0,margin:"20px auto"},k={height:"100%",width:"100%",overflow:"auto",outline:0};a.fn.modal=function(b){return a.modal.impl.init(this,b)},a.modal=function(b,c){return a.modal.impl.init(b,c)};var l={},m={};a.modal.defaults={appendTo:"body",opacity:.5,overlayId:"modal-overlay",overlayCss:{},containerId:"modal-container",containerCss:{},zIndex:1e3,close:!0,closeHTML:'<a class="modal-close-Img" title="Close"></a>',closeClass:"modal-close",overlayClose:!1,fixed:!0,onShow:null,onClose:null};var n=a.modal.impl={init:function(h,i){if(l.data)return!1;m=a.extend({},a.modal.defaults,i);var j=b(),k=null,o=typeof h;if(m.placeHolder=!1,"object"===o)k=a(h),k.parent().parent().size()>0&&(m.placeHolder=!0,k.replaceWith(g));else{if("string"!==o&&"number"!==o)return alert("Modal Error: Unsupported data type: "+typeof h),n;k=a("<div></div>").html(h)}var p=c().append(k),q=d(),r=e().append(q).append(p);l.data=k,l.overlay=j,l.placeHolder=g,l.modalContainer=r;var s=function(a){a.preventDefault(),n.close()};return r.find("."+m.closeClass).one("click"+f,s),m.close&&m.overlayClose&&j.one("click"+f,s),a(m.appendTo).append(j).append(r),j.show(),r.show(),k.show(),a.isFunction(m.onShow)&&m.onShow(l),n},close:function(){l.overlay.hide().unbind().remove(),l.modalContainer.hide().unbind().remove(),l.data.hide(),m.placeHolder&&l.placeHolder.replaceWith(l.data),l.data=null,l.overlay=null,l.placeHolder=null,l.modalContainer=null,a.isFunction(m.onClose)&&m.onClose(l)}}}(Zepto);